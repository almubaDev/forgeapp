{% extends 'base_email.html' %}
{% load static %}
{% load humanize %}

{% block title %}Comprobante de Pago{% endblock %}

{% block content %}
<table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td align="center" style="padding: 20px 0;">
            <!-- Header with Logo -->
            <table width="90%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                    <td align="center">
                        <img src="https://res.cloudinary.com/do89fyolr/image/upload/v1740102351/logo_rplk5z.png" alt="ForgeApp Logo" style="width: 180px; height: auto; margin-bottom: 20px;">
                        <h1 style="font-size: 28px; color: #4EB8D5; margin: 0 0 20px 0; font-weight: 700;">Comprobante de Pago</h1>
                    </td>
                </tr>
            </table>
            
            <!-- Main Content -->
            <table width="90%" cellpadding="0" cellspacing="0" border="0" style="background: linear-gradient(135deg, #0e3559 0%, #0a2546 100%); color: #ffffff; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                <tr>
                    <td style="padding: 30px;">
                        <p style="margin-bottom: 20px; font-size: 16px; line-height: 1.6;">Estimado/a <strong>{{ client.name }}</strong>,</p>
                        
                        <p style="margin-bottom: 20px; font-size: 16px; line-height: 1.6;">¡Su pago ha sido procesado exitosamente!</p>
                        
                        <p style="margin-bottom: 20px; font-size: 16px; line-height: 1.6;">Nos complace confirmarle que hemos recibido su pago por el servicio de <strong>{{ application.name }}</strong>. Adjunto a este email encontrará el comprobante de pago que puede guardar para sus registros.</p>
                        
                        <p style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">Detalles de la transacción:</p>
                        
                        <table width="100%" cellpadding="12" cellspacing="0" border="0" style="margin-bottom: 20px; background-color: rgba(255, 255, 255, 0.1); border-radius: 8px; border-left: 4px solid #4EB8D5;">
                            <tr>
                                <td width="30%" style="font-weight: bold;">Fecha:</td>
                                <td>{{ payment.payment_date|date:"d/m/Y H:i" }}</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">Monto:</td>
                                <td>${{ payment.amount|floatformat:0|intcomma }}</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">Referencia:</td>
                                <td>{{ subscription.reference_id }}</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">Tipo:</td>
                                <td>{{ subscription.get_payment_type_display }}</td>
                            </tr>
                        </table>
                        
                        <p style="margin-bottom: 20px; font-size: 16px; line-height: 1.6;">Puede verificar la autenticidad de este comprobante escaneando el código QR adjunto en el PDF.</p>
                        
                        <p style="margin-bottom: 20px; font-size: 16px; line-height: 1.6;">Agradecemos su confianza en nosotros y estamos comprometidos en brindarle el mejor servicio. ¡Su satisfacción es nuestra prioridad!</p>
                        
                        <p style="margin-bottom: 10px; font-size: 16px; line-height: 1.6;">Si tiene alguna pregunta o necesita asistencia, no dude en contactarnos.</p>
                        
                        <p style="margin-top: 30px; font-size: 16px;">Saludos cordiales,</p>
                        <p style="margin-bottom: 0; font-weight: 700; font-size: 16px;">Equipo ForgeApp</p>
                    </td>
                </tr>
            </table>
            
            <!-- Footer -->
            <table width="90%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                    <td align="center" style="color: #666666; font-size: 12px; padding: 20px 0;">
                        <p>Si tiene alguna pregunta o necesita ayuda, no dude en contactarnos.</p>
                        <p>© {{ now.year }} ForgeApp - www.forgeapp.cl</p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
{% endblock %}
